<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kanto Map View</title>
    <style>
        body, html { 
            margin: 0; 
            padding: 0; 
            width: 100%; 
            height: 100%; 
            background: #0b132b; 
            color: white; 
            font-family: 'Segoe UI', sans-serif; 
            overflow: hidden; /* Prevent page scroll */
            display: flex;
            flex-direction: column;
        }

        /* Top Bar for UI elements */
        .header-ui {
            padding: 15px;
            background: rgba(11, 19, 43, 0.9);
            z-index: 10;
            text-align: center;
            border-bottom: 2px solid #1e3a5f;
        }

        h1 { 
            margin: 0; 
            color: #4cc9f0; 
            text-transform: uppercase; 
            font-size: 1.5rem;
            letter-spacing: 2px;
        }

        .controls-hint {
            font-size: 0.8rem;
            color: #8d99ae;
            margin-top: 5px;
        }

        /* Full Screen Viewport */
        #map-viewport { 
            flex-grow: 1;
            width: 100%;
            cursor: grab;
            background-image: url('https://40k.zombiecrisis.org/map.png');
            background-repeat: no-repeat;
            background-position: center;
            background-size: contain; /* Initial fit */
            will-change: transform, background-size;
        }

        #map-viewport:active { cursor: grabbing; }

        .back-btn { 
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: #8d99ae; 
            text-decoration: none; 
            font-weight: bold; 
            border: 1px solid #1e3a5f; 
            background: rgba(11, 19, 43, 0.8);
            padding: 10px 25px; 
            border-radius: 30px; 
            transition: 0.3s;
            z-index: 10;
        }

        .back-btn:hover { border-color: #4cc9f0; color: #4cc9f0; background: #1c2541; }
    </style>
</head>
<body>

    <div class="header-ui">
        <h1>Kalos Region Map</h1>
        <div class="controls-hint">Scroll to Zoom • Drag to Pan</div>
    </div>
    
    <div id="map-viewport"></div>

    <a href="maps.html" class="back-btn">← Back to Regions</a>

    <script>
        const viewport = document.getElementById('map-viewport');

        let scale = 1;
        let posX = 0;
        let posY = 0;
        let isDragging = false;
        let startX, startY;

        // Mouse Wheel Zoom
        viewport.onwheel = function(e) {
            e.preventDefault();
            const delta = -Math.sign(e.deltaY);
            const zoomSpeed = 0.1;
            
            const oldScale = scale;
            scale += delta * zoomSpeed;
            
            // Limit zoom scale
            scale = Math.min(Math.max(1, scale), 6);

            // Adjust position to zoom toward cursor
            if (scale !== oldScale) {
                const rect = viewport.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;
                
                posX -= (mouseX - posX) * (scale / oldScale - 1);
                posY -= (mouseY - posY) * (scale / oldScale - 1);
            }

            updateTransform();
        };

        // Panning Logic
        viewport.onmousedown = function(e) {
            isDragging = true;
            startX = e.clientX - posX;
            startY = e.clientY - posY;
        };

        window.onmousemove = function(e) {
            if (!isDragging) return;
            posX = e.clientX - startX;
            posY = e.clientY - startY;
            updateTransform();
        };

        window.onmouseup = function() {
            isDragging = false;
        };

        function updateTransform() {
            // Apply scale and translation directly to the background properties or the element
            viewport.style.backgroundSize = (scale * 100) + '%';
            viewport.style.backgroundPosition = `calc(50% + ${posX}px) calc(50% + ${posY}px)`;
        }
    </script>
</body>

</html>
